<!DOCTYPE html>
<html class="nojs" lang="en-us" dir="ltr">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>arcpy – Node Dangles</title>
<link rel="alternate" type="application/rss+xml" title="RSS" href="https://maprantala.com/category/arcpy/index.xml">
<meta name="description" content="">
<meta name="created" content="2018-05-08T17:56:09-0500">
<meta name="modified" content="2018-05-08T17:56:09-0500">
<meta name="author" content="Matthew Rantala">
<meta name="contact" content="webmaster@maprantala.com">
<meta property="og:site_name" content="Node Dangles">
<meta property="og:title" content="arcpy">
<meta property="og:url" content="https://maprantala.com/category/arcpy/">
<meta property="og:type" content="website">

<meta name="generator" content="Hugo 0.80.0" />
<meta name="msapplication-TileColor" content="#ffffff">
<meta name="theme-color" content="#ffffff">


<link rel="canonical" href="https://maprantala.com/category/arcpy/">
<link rel="apple-touch-icon" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="manifest" href="/site.webmanifest">

<link rel="stylesheet" href="/css/mobile.2ab74aa64785dcab8114959e76ca140cf76207cd85989bc6d4fc3b12f734a09e.css" media="screen">
<link rel="stylesheet" href="/css/styles.159e5347492c734a666a2678db9a478c339b9ad376372e062cd19572540448a1.css">
<link rel="stylesheet" href="/css/print.27fc184f8670f41a2690985390779e7b20335a8fadff8fa015cf9417ffe50c36.css" media="print">

<script type="application/ld+json">
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "url" : "https://maprantala.com/category/arcpy/",
    "name": "arcpy",
    "description": "Geospatial Programming Blog",
    "author": {
      "@type": "Person",
      "name": "Matthew Rantala"
    },
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "https://maprantala.com"
    },
    "publisher": {
      "@type": "Organization",
      "name": "Node Dangles",
      "url": "https://maprantala.com"
    }
  }
</script>


<script type="text/javascript">
var sc_project=6046986; 
var sc_invisible=1; 
var sc_security="827ace42"; 
var scJsHost = "https://";
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="Web Analytics
Made Easy - StatCounter" href="https://statcounter.com/"
target="_blank"><img class="statcounter"
src="https://c.statcounter.com/6046986/0/827ace42/0/"
alt="Web Analytics Made Easy -
StatCounter"></a></div></noscript>


</head>

<body class="list-page">
<div class="page layout__page">
<header class="header layout__header">
<a href="/" title="Home" rel="home" class="header__logo"><img src="/images/logo.png" alt="Home" class="header__logo-image"></a>
<h1 class="header__site-name">
<a href="/" title="Home" class="header__site-link" rel="home"><span>Node Dangles</span></a>
</h1>
<div class="region header__region">
</div>
</header>

<nav class="main-menu layout__navigation">
<h2 class="visually-hidden">Main menu</h2>
<ul class="navbar">
<li><a href="/" class="active" aria-current="page">Home</a></li>
<li><a href="/posts/">Posts</a></li>
</ul>
</nav>


<main class="main layout__main">
<h1 class="title">arcpy</h1>
<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2018/05/08/using-arcpy.mapping-to-update-definition-queries/">Using ArcPy.Mapping to update Definition Queries</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2018-05-08T17:56:09-05:00">8 May, 2018</time>
</div>

</header>
<div class="content">
Working with a routine process today that I normally only do once in awhile but today needed to do it several times. It requires changing the definition query on several features classes. Being the &lsquo;lazy&rsquo; GIS guy that I am (owner of a company I used to work at called me that once as a sort of compliment for my tendency to script a lot of what I did), I decided to finally script it instead of changing definition queries about 42 times.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2017/10/04/arctoolbox-tool-add-st_con_abr-to-hennepin-county-mn-centerlines/">ArcToolbox Tool: Add [ST_CON_ABR] to Hennepin County, MN Centerlines</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2017-10-04T22:17:11-05:00">4 October, 2017</time>
</div>

</header>
<div class="content">
One of the great advancements over the last decade plus in GIS is that government agencies have started to move away from a &lsquo;recover-our-cost&rsquo; mentality to more of an &lsquo;Open Data&rsquo;. Minnesota, for example, has launched their Geospatial Commons as a platform for sharing data.
And while getting free, authoritative data is awesome, it can leave you in a bind if the structure of the data changes. Sometime between April and September, Hennepin County, Minnesota, changed the schema of their publicly available street centerlines data.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2015/08/14/converting-mxd-to-layer-file-in-arcpy/">Converting MXD to Layer file in Arcpy</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2015-08-14T10:01:54-05:00">14 August, 2015</time>
</div>

</header>
<div class="content">
Working on doing some advanced ArcGIS server printing and had the need to batch convert many existing .mxd files to .lyr files. So instead of opening up X number of map documents, thought I would do it via code. All of my .mxds in this case had just one data frame so the process was pretty simple–I add an empty group layer (Thanks Petr Krebs for the idea), copy all the existing layers into it, and save it out as a layer file.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2014/12/31/calling-os.startfile-and-webbrowser.open-from-arcgis/">Calling os.startfile and webbrowser.open from ArcGIS</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2014-12-31T14:38:16-06:00">31 December, 2014</time>
</div>

</header>
<div class="content">
Recently I&rsquo;ve created Python add-ins for data entry for our staff. Most of these have a toolbar with a &lsquo;Help&rsquo; button that opens a help file in .pdf format.Sample python add-in toolbar. The first add-in was for ArcCatalog and this worked splendidly. I was using os.startfile(path to help.pdf).
However, when I started doing ArcMap add-ins, clicking the Help button would open the help.pdf but ArcMap would crash. Oops!
Luckily the Python development team at Esri already had a blog post about this at their ArcPy Café blog.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2014/12/18/quick-dirty-arcpy-verify-a-coded-value-domain-code/">Quick &amp; Dirty Arcpy: Verify a Coded Value Domain Code</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2014-12-18T22:32:11-06:00">18 December, 2014</time>
</div>

</header>
<div class="content">
I&rsquo;ve been working on a few different data import routines and one of the things I recently built was the ability to verify that a potential Code to be entered into a field with a Coded Value Domain is valid.
The logic of the code is pretty straight-forward. Get a field&rsquo;s domain and check that a potential value is one of the code values. The biggest &lsquo;trick&rsquo; in this code is that arcpy.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2014/12/03/quick-dirty-arcpy-listing-data-sources/">Quick &amp; Dirty ArcPy: Listing Data Sources</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2014-12-03T08:05:10-06:00">3 December, 2014</time>
</div>

</header>
<div class="content">
I just had the need to go through a directory containing many (100+) layer files (.lyr) and verify the data sources in each. I could have loaded each into ArcMap and checked the properties, but choose not to. Here&rsquo;s the bare-bones script I used instead:
import arcpy, glob,os theDir = r&#34;L:\gdrs\data\org\us_mn_state_dnr\elev_minnesota_lidar\\&#34; os.chdir(theDir) for iFile in glob.glob(&#34;*.lyr&#34;): print iFile lyr = arcpy.mapping.Layer(iFile) for i in arcpy.mapping.ListLayers(lyr): try: print &#34; {0}: {1}&#34;.format(i,i.dataSource) except: print &#34; {0}: Does not support dataSource&#34;.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2014/07/07/quick-dirty-arcpy-compare-feature-class-table-schemas/">Quick &amp; Dirty arcpy: Compare Feature Class Table Schemas</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2014-07-07T05:06:18-05:00">7 July, 2014</time>
</div>

</header>
<div class="content">
I&rsquo;m in the process of rewriting a process, moving most of the processing from arcpy to postgresql-enabled python (love me some psycopg2).
One of the QC checks I&rsquo;m doing at the end of this re-write is just verifying that the feature class schemas are the same (or that the differences are intended) under the new process as they were in the old process.
And while ArcGIS does have a good tool for this, there were a couple tweaks I wanted to make.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2014/05/06/zipping-a-shapefile-from-arccatalog/">Zipping a Shapefile from ArcCatalog</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2014-05-06T05:42:04-05:00">6 May, 2014</time>
</div>

</header>
<div class="content">
Back in 2010, I posted a python script and an ArcToolbox tool for zipping a shapefile.
Well, I had a request to modify the code so it would not error out if it encounters a .lock file. While .lock files exist for a reason and shouldn&rsquo;t be totally ignored, in some cases it is safe to do so, so I went ahead any modified the code, which can be downloaded from Github.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2014/04/23/quick-dirty-arcpy-bulk-changing-field-values/">Quick &amp; Dirty arcpy: Bulk Changing Field Values</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2014-04-23T05:18:24-05:00">23 April, 2014</time>
</div>

</header>
<div class="content">
In mapping cross sections, our geologists often find themselves renaming their stratigraphic units midway, or at the end, of creating multiple cross sections. This can cause a situation where we need to change multiple values in multiple fields in multiple feature classes–a situation that can get messy very fast.
Perfect situation for a quick &amp; dirty arcpy script and, in this case, an ArcToolbox tool that can be downloaded.
This tool will change all feature classes in the O:\clay_cga\sand-distribution_model\dnrPackages\stratlines directory.
</div>
</article>

<article class="section-posts list-view">
<header>
<h2 class="title title-submitted"><a href="/2014/04/02/arcpy.listfeatureclasses-bug/">arcpy.ListFeatureClasses() Bug</a></h2>
<div class="submitted">
<span class="author" itemprop="author">Matt</span> - <time class="created-date" datetime="2014-04-02T18:59:06-05:00">2 April, 2014</time>
</div>

</header>
<div class="content">
I was recently re-evaluating our back-up procedures and discovered and found a nasty bug with the arcpy&rsquo;s ListFeatureClasses request. If you have a feature class in a feature dataset with the same name, ListFeatureClasses may not find it or anything else in that feature dataset.
Unfortunately, we recently made our daily backup a python-based system that uses ListFeatureClasses and got bit by this bug.
After discovering missing data in our backups, I reconstructed what happened and found this bug.
</div>
</article>

<nav class="pager">
<a href="/category/arcpy/page/2/" rel="next" class="pager-item pager-next">Next</a>
</nav>

</main>


<footer class="footer layout__footer">
<p>Subscribe to section category: <a rel="alternate" type="application/rss&#43;xml" href="https://maprantala.com/category/arcpy/index.xml">RSS</a></p>
<p><span>© Node Dangles</span></p>


</footer>

</div>
<div class="mobile-nav" dir="ltr">
  <div class="mobile-nav__cover"></div>
  <a href="#navigation" class="mobile-nav__toggle" aria-haspopup="true" role="button">Menu</a>
  <div class="mobile-nav__sheet">
    <div class="mobile-nav__region">
    
    </div>
    <nav class="mobile-nav__main-menu">
    <h2 class="visually-hidden">Main menu</h2>
    <ul class="mobile-nav__navbar">
    <li><a href="/" class="active" aria-current="page">Home</a></li>
    <li><a href="/posts/">Posts</a></li>
    </ul>
    </nav>
  </div>
</div>
</body>
</html>
